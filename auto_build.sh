#!/bin/bash
# -*- coding: utf-8 -*-
# 影藏·媒体管理器 - 自动构建脚本 (Linux/macOS)

set -e

echo "===================================================================="
echo "影藏·媒体管理器 - 自动构建系统"
echo "MediaManager - Automatic Build System"
echo "===================================================================="
echo ""

# 检查 Python
if ! command -v python3 &> /dev/null; then
    echo "[错误] 未找到 Python 3，请先安装 Python 3.8 或更高版本"
    exit 1
fi

echo "[信息] 检测到 Python 环境"
python3 --version
echo ""

# 运行构建脚本
echo "[信息] 开始构建流程..."
echo ""

if python3 auto_build.py; then
    echo ""
    echo "===================================================================="
    echo "[成功] 构建完成！"
    echo "===================================================================="
    echo ""
    echo "生成的文件位于 package 目录"
    echo ""
else
    echo ""
    echo "===================================================================="
    echo "[失败] 构建过程出现错误"
    echo "===================================================================="
    echo ""
    echo "请查看日志文件获取详细信息"
    exit 1
fi
